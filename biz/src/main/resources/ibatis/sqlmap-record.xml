<?xml version="1.0" encoding="GB2312"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="record">
	
	<typeAlias alias="record" type="com.papa2.cube.api.record.bo.Record" />
	
	<select id="getRecordList" parameterClass="record" resultClass="record">
	<![CDATA[
		SELECT CASE WHEN t.DoorID = '入口' then CONVERT(VARCHAR(100), t.IoDate, 20) ELSE '' END AS startTime,
			   CASE WHEN t.DoorID = '出口' then CONVERT(VARCHAR(100), t.IoDate, 20) ELSE '' END AS endTime,
			   t.CardNo AS cardNo,
			   t.BusNo AS carNo
		  FROM IoData t
		 WHERE t.IoDate > dateadd(hh, -1, getdate())
	]]>
	</select>
	
</sqlMap>